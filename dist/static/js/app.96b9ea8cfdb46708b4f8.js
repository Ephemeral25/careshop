webpackJsonp([1],{"7zck":function(e,t){},"8c7Q":function(e,t){},BGOu:function(e,t,a){e.exports=a.p+"static/img/logo-car.bda82a7.png"},"N+MM":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),n=a("3EgV"),o=a.n(n),s=(a("7zck"),{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav",[a("v-app-bar",{attrs:{dark:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",[e._v("CAR")]),e._v(" "),a("span",{staticClass:"font-weight-light"},[e._v("E-shop")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",[a("router-link",{attrs:{to:"/login"}},[e._v("Login")]),e._v(" "),a("v-icon",[e._v("mdi-open-in-new")])],1),e._v(" "),a("v-btn",[a("router-link",{attrs:{to:"/register"}},[e._v("Register")]),e._v(" "),a("v-icon",[e._v("mdi-open-in-new")])],1)],1)],1)])},staticRenderFns:[]}),i={name:"App",data:function(){return{authenticated:!1,devAccount:{username:"test",password:"test"}}},components:{Navigation:a("VU/8")(null,s,!1,null,null,null).exports},mounted:function(){},methods:{}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("Navigation")],1),this._v(" "),t("img",{attrs:{src:a("BGOu")}}),this._v(" "),t("router-view")],1)])},staticRenderFns:[]};var u=a("VU/8")(i,l,!1,function(e){a("8c7Q")},null,null).exports,d=a("/ocq"),m=a("mvHQ"),p=a.n(m),c={name:"Login",data:function(){return{input:{username:"",password:""}}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.password.length>0&&this.$http.post("/login",{email:this.email,password:this.password}).then(function(e){var a=e.data.user.is_admin;localStorage.setItem("user",p()(e.data.user)),localStorage.setItem("jwt",e.data.token),null!=localStorage.getItem("jwt")&&(t.$emit("loggedIn"),null!=t.$route.params.nextUrl?t.$router.push(t.$route.params.nextUrl):1==a?t.$router.push("admin"):t.$router.push("dashboard"))}).catch(function(e){console.error(e.response)})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"}},[a("h1",[e._v("Login")]),e._v(" "),a("v-form",[a("label",{attrs:{for:"email"}},[e._v("E-Mail Address")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("div",[a("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),a("div",[a("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:e.handleSubmit}},[e._v("\n        Login\n      ")])],1)])],1)},staticRenderFns:[]},h=a("VU/8")(c,v,!1,null,null,null).exports,f={props:["nextUrl"],data:function(){return{name:"",email:"",password:"",password_confirmation:"",is_admin:null}},methods:{handleSubmit:function(e){var t=this;if(e.preventDefault(),!(this.password===this.password_confirmation&&this.password.length>0))return this.password="",this.passwordConfirm="",alert("Passwords do not match");var a="/register";1==this.is_admin&&(a="/register-admin"),this.$http.post(a,{name:this.name,email:this.email,password:this.password,is_admin:this.is_admin}).then(function(e){localStorage.setItem("user",p()(e.data.user)),localStorage.setItem("jwt",e.data.token),null!=localStorage.getItem("jwt")&&(t.$emit("loggedIn"),null!=t.$route.params.nextUrl?t.$router.push(t.$route.params.nextUrl):t.$router.push("/"))}).catch(function(e){console.error(e)})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("Register")]),e._v(" "),a("form",[a("label",{attrs:{for:"name"}},[e._v("Name")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{id:"name",type:"text",required:"",autofocus:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("label",{attrs:{for:"email"}},[e._v("E-Mail Address")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("label",{attrs:{for:"password-confirm"}},[e._v("Confirm Password")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirmation,expression:"password_confirmation"}],attrs:{id:"password-confirm",type:"password",required:""},domProps:{value:e.password_confirmation},on:{input:function(t){t.target.composing||(e.password_confirmation=t.target.value)}}})]),e._v(" "),a("label",{attrs:{for:"password-confirm"}},[e._v("Is this an administrator account?")]),e._v(" "),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.is_admin,expression:"is_admin"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.is_admin=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[e._v("Yes")]),e._v(" "),a("option",{attrs:{value:"0"}},[e._v("No")])])]),e._v(" "),a("div",[a("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:e.handleSubmit}},[e._v("\n        Register\n      ")])],1)])])},staticRenderFns:[]},_=a("VU/8")(f,g,!1,null,null,null).exports,w={data:function(){return{msg:"The commoners"}},methods:{logout:function(){this.authenticated=!1,localStorage.clear(),window.location.reload()}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v("Welcome to regular users page")]),e._v(" "),a("h2",[e._v(e._s(e.msg))]),e._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:e.logout}},[e._v("Logout")])],1)},staticRenderFns:[]};var x=a("VU/8")(w,b,!1,function(e){a("xxQL")},"data-v-35e2452e",null).exports,$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[this._v("Welcome to administrator page")]),this._v(" "),t("h2",[this._v(this._s(this.msg))])])},staticRenderFns:[]};var S=a("VU/8")({data:function(){return{msg:"The superheros"}}},$,!1,function(e){a("Sgz+")},"data-v-c04ef3a6",null).exports,y={data:function(){return{email:"",password:""}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.password.length>0&&this.$http.post("/login",{email:this.email,password:this.password}).then(function(e){var a=e.data.user.is_admin;localStorage.setItem("user",p()(e.data.user)),localStorage.setItem("jwt",e.data.token),null!=localStorage.getItem("jwt")&&(t.$emit("loggedIn"),null!=t.$route.params.nextUrl?t.$router.push(t.$route.params.nextUrl):1==a?t.$router.push("admin"):t.$router.push("dashboard"))}).catch(function(e){console.error(e.response)})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("Login")]),e._v(" "),a("form",[a("label",{attrs:{for:"email"}},[e._v("E-Mail Address")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("div",[a("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),a("div",[a("button",{attrs:{type:"submit"},on:{click:e.handleSubmit}},[e._v("Login")])])])])},staticRenderFns:[]};a("VU/8")(y,N,!1,function(e){a("N+MM")},"data-v-31cdd404",null).exports;r.default.use(d.a);var I=new d.a({mode:"history",routes:[{path:"/",name:"login",component:h},{path:"/login",name:"login",component:h,meta:{guest:!0}},{path:"/register",name:"register",component:_,meta:{guest:!0}},{path:"/dashboard",name:"userboard",component:x,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:S,meta:{requiresAuth:!0,is_admin:!0}}]});I.beforeEach(function(e,t,a){if(e.matched.some(function(e){return e.meta.requiresAuth}))if(null==localStorage.getItem("jwt"))a({path:"/login",params:{nextUrl:e.fullPath}});else{var r=JSON.parse(localStorage.getItem("user"));e.matched.some(function(e){return e.meta.is_admin})?1==r.is_admin?a():a({name:"userboard"}):a()}else e.matched.some(function(e){return e.meta.guest})?null==localStorage.getItem("jwt")?a():a({name:"userboard"}):a()});var P=I,U=a("mtWM"),k=a.n(U);r.default.prototype.$http=k.a,r.default.use(o.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:P,vuetify:new o.a,components:{App:u},template:"<App/>"})},"Sgz+":function(e,t){},xxQL:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.96b9ea8cfdb46708b4f8.js.map